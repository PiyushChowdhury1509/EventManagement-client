<div class="notice-card">
  <h2 class="notice-title">{{ convertToUpperCase(notice.name) }}</h2>

  <div class="notice-header">
    <div class="notice-meta">
      <h3 class="notice-org">GoEvent â€¢ {{ formatDate(notice.createdAt) }}</h3>
    </div>
    <span class="menu">â‹®</span>
  </div>

  <p class="notice-content">{{ notice.content }}</p>

  <span class="notice-badge">{{ notice.category }}</span>

  <div class="notice-attachment" *ngIf="notice.files">
    <div class="file-icon">ðŸ“‚</div>
    <a [href]="notice.attachmentUrl" target="_blank" class="file-link">
      {{ notice.attachmentName || "View Attachment" }}
    </a>
  </div>

  <div class="notice-actions">
    <div class="left">
      <span class="action heart" (click)="toggleLike()">
        <mat-icon [ngClass]="{ liked: isLiked }">
          {{ isLiked ? "favorite" : "favorite_border" }}
        </mat-icon>
      </span>
      <span class="action" (click)="openComments()">ðŸ’¬</span>
      <span class="action">ðŸ“¤</span>
    </div>
    <span class="bookmark">ðŸ”–</span>
  </div>

  <div class="notice-footer">
    <span class="likes"
      ><strong>{{ notice.likeCount }}</strong> likes</span
    >
    <span class="comments"
      ><strong>{{ notice.commentCount }}</strong> comments</span
    >
  </div>

  <div class="comment-box">
    <input
      type="text"
      placeholder="Add a comment..."
      [(ngModel)]="newComment"
      (keyup.enter)="submitComment()"
      [disabled]="isPosting"
    />
    <button (click)="submitComment()" [disabled]="!newComment.trim() || isPosting">
      {{ isPosting ? 'Posting...' : 'Post' }}
    </button>
  </div>

  <div class="comment-list" *ngIf="comments.length">
    <div class="comment-item" *ngFor="let c of comments">
      <span class="author">{{ c.author }}</span>
      <span class="text">{{ c.text }}</span>
      <span class="time">â€¢ {{ formatDate(c.createdAt) }}</span>
    </div>
  </div>

  <div class="comment-overlay" *ngIf="showComments">
    <div class="overlay-backdrop" (click)="closeComments()"></div>
    <div class="overlay-panel">
      <div class="overlay-header">
        <button class="close-btn" (click)="closeComments()">âœ•</button>
        <div class="post-meta">
          <div class="post-title">{{ notice.name }}</div>
          <div class="post-sub">GoEvent â€¢ {{ formatDate(notice.createdAt) }}</div>
        </div>
      </div>

      <div class="overlay-body">
        <div class="comments-stream">
          <div class="stream-item" *ngFor="let c of comments">
            <img class="avatar" src="/assets/eventLogo.jpg" alt="avatar" />
            <div class="content">
              <div class="row">
                <span class="author">{{ c.author }}</span>
                <span class="time">{{ formatDate(c.createdAt) }}</span>
              </div>
              <div class="text">{{ c.text }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="overlay-footer">
        <input
          type="text"
          placeholder="Add a comment..."
          [(ngModel)]="newComment"
          (keyup.enter)="submitComment()"
          [disabled]="isPosting"
        />
        <button (click)="submitComment()" [disabled]="!newComment.trim() || isPosting">
          {{ isPosting ? 'Posting...' : 'Post' }}
        </button>
      </div>
    </div>
  </div>
</div>
